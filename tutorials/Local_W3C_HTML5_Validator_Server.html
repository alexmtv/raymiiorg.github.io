<!DOCTYPE html><html lang="en"><head><title>Local W3C HTML5 Validator Server - Raymii.org</title><link href="/s/inc/css/light.css" rel="stylesheet" title="light"/><link href="/s/inc/css/dark.css" rel="alternate stylesheet" title="dark"/><script src="/s/inc/js/jquery-2.1.1.min.js"></script><script src="/s/inc/js/bootstrap.3.2.0.min.js"></script><script src="/s/inc/js/styleswitcher.js"></script><meta content="text/html;charset=utf-8" http-equiv="Content-Type"/><link href="inc/img/icons/iphone.png" rel="apple-touch-icon"/><link href="inc/img/icons/ipad.png" rel="apple-touch-icon" sizes="76x76"/><link href="inc/img/icons/iphone-retina.png" rel="apple-touch-icon" sizes="120x120"/><link href="inc/img/icons/ipad-retina.png" rel="apple-touch-icon" sizes="152x152"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="/s/inc/opensearch.xml" rel="search" type="application/opensearchdescription+xml"/><link href="https://raymii.org/s/feed.xml" rel="alternate" title="RSS Feed for Raymii.org" type="application/rss+xml"/></head><body><a id="top-of-page"></a><div class="container-fluid "><div class="row"><div class="col-md-12"><div class="col-md-3 col-sm-3 max-200"><div class="well well-none"><h3 class="headheader"><a href="https://raymii.org/s/">Raymii.org<img alt="IEC Resistor logo" src="https://raymii.org/s/inc/img/resistor-50.png"/></a></h3><h6 class="headheader">Quis custodiet ipsos custodes?</h6><h6><a href="https://raymii.org/s/feed.xml">RSS Feed</a></h6></div><form action="https://encrypted.google.com/search" role="search"><div class="form-group"><input name="as_sitesearch" type="hidden" value="raymii.org"/><input name="as_qdr" type="hidden" value="all"/><input class="form-control" name="as_q" placeholder="Search" type="text"/></div></form><div class="menu"><ul class="nav nav-pills nav-stacked"><li><a class="special-menu" href="/s/index.html">Home</a></li><li class="bottom-spacing"><a class="special-menu" href="/s/everything.html">All Items</a></li><li><a class="link" href="/s/tags/bash.html">Bash</a></li><li><a class="link" href="/s/tags/monitoring.html">Monitoring</a></li><li><a class="link" href="/s/tags/ssl.html">SSL</a></li><li><a class="link" href="/s/tags/debian.html">Debian</a></li><li><a class="link" href="/s/tags/python.html">Python</a></li><li><a class="link" href="/s/tags/vpn.html">VPN</a></li><li><a class="link" href="/s/tags/ubuntu.html">Ubuntu</a></li><li><a class="link" href="/s/tags/nginx.html">nginx</a></li><li><a class="link" href="/s/tags/openstack.html">Openstack</a></li><li><a class="link" href="/s/tags/ansible.html">Ansible</a></li></ul><ul class="navbar-collapse nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Style<b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#" onclick="setActiveStyleSheet('dark')">Dark</a></li><li><a href="#" onclick="setActiveStyleSheet('light')">Light</a></li></ul></li></ul><br/><br/><a href="http://clients.inceptionhosting.com/aff.php?aff=083">Inception Hosting Affiliate Link</a><br/> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">Digital Ocean Affiliate Link</a><br/><script type="text/javascript"><!--
                google_ad_client = "ca-pub-7993642564731324";
                google_ad_slot = "9322003332";
                google_ad_width = 200;
                google_ad_height = 200;
                //-->
                </script><script src="//pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
                </script></div></div><div class="col-md-8 col-sm-8"><div class="inner"><h2 class="headheader">Local W3C HTML5 Validator Server</h2><ul class="breadcrumb"><li><a class="link" href="../index.html">Home</a></li><li><a class="link" href="../tutorials/index.html">Tutorials</a></li><li><a class="link" href="Local_W3C_HTML5_Validator_Server.html">Local W3C HTML5 Validator Server</a></li></ul><p><small>27-12-2013</small> | <small>Remy van Elst</small></p><div class="ad"><script type="text/javascript"><!--
                            google_ad_client = "ca-pub-7993642564731324";
                            /* voorartikel */
                            google_ad_slot = "6172324376";
                            google_ad_width = 728;
                            google_ad_height = 90;
                            //-->
                            </script><script src="//pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript">
                            </script></div><br/><p><img alt="w3 validator" src="http://i.imgur.com/jqyin7n.png"/>This tutorial shows you how to set up a local instance of the w3c html validator, including HTML5 validation support via a local instance of the Validator.nu HTML5 validator. The online w3 validator has strict limits and will ban you for some time if you validate to often. So if you for example have a local unit test to check a website you will get banned a lot. Which is understandable of course, it is a free service. They provide all source code plus it is in the debian repositories, it is dead simple to set up one yourself.</p><p>It was tested on Ubuntu 13.10 on a Digital Ocean VPS. If you like this tutorial and want to support my website, use this link to order a Digital Ocean VPS: <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">https://www.digitalocean.com/?refcode=7435ae6b8212</a></p><p>I've used Ubuntu 13.10 because that has the latest w3 test (1.3). If you use Ubuntu 12.04 LTS and you want the latest version you can install the two packages (<code>w3c-markup-validator</code> and <code>w3c-sgml-lib</code>) from the raring repositories (13.04), that works just fine.</p><h3>Contents</h3><ul><li>Installing required packages</li><li>Compiling / Installing HTML5 Validator.nu</li><li>Configuring the w3c-validator</li><li>Upstart script for the HTML5 validator</li></ul><h3>Installing required packages</h3><p>Install all required packages:</p><pre><code>apt-get install w3c-markup-validator mercurial subversion python default-jdk
</code></pre><p>This will install everything required for the w3 validator and for the HTML 5 one (that is Java). It will also pull down Apache. After the install finished you can reach your validator already at <code>http://server.ext/w3c-validator</code>. However, it is not yet configured for HTML5 validation, which is kinda required for todays web.</p><h3>Compiling / Installing the HTML5 Validator.nu</h3><p>The W3 validator itself does not do HTML5 validation. It does support using external services to do it, and we are going to do it with the HTML5 validator from <a href="http://validator.nu">http://validator.nu</a>.</p><p>Create a folder:</p><pre><code>mkdir /usr/share/html5-validator 
cd /usr/share/html5-validator
</code></pre><p>Set the <code>JAVA_HOME</code> path.</p><pre><code>export JAVA_HOME=/usr/lib/jvm/java-6-openjdk
</code></pre><p>Clone the latest validator source:</p><pre><code>hg clone https://bitbucket.org/validator/build build
</code></pre><p>Start the build:</p><pre><code>python build/build.py all
</code></pre><p>If you encounter a Java exception, run the build script again. I had to do it three times:</p><pre><code>python build/build.py all   
</code></pre><p>If it all works after a few tries, the validator runs at <code>localhost:8888</code>:</p><pre><code>INFO::Started SocketConnector@0.0.0.0:8888
</code></pre><p>Kill it with CTRL+C and continue reading. We first configure the W3 validator and then create an upstart script for the Validator.nu one.</p><h3>Configuring the w3c-validator</h3><p>I need to validate hosts in private networks, so I changed the below option in <code>/etc/w3c/validator.conf</code>:</p><pre><code>Allow Private IPs = yes
</code></pre><p>Enable the HTML5 validator by uncommenting the following:</p><pre><code>&lt;External&gt;
## Enable checking documents via external services.
## The example config below assumes that you have installed the validator.nu
## engine on the same machine as the markup validator.
## See http://about.validator.nu/ for installation instructions.
HTML5 = http://localhost:8888/html5/
#CompoundXML = http://localhost:8888/
&lt;/External&gt;
</code></pre><h3>Upstart script for HTML5 validator</h3><p>Create the upstart script to start the HTML5 validator at boot:</p><pre><code>vim /etc/init/html5-validator.conf
</code></pre><p>Contents:</p><pre><code>description "Validator.nu HTML5 Validator"

start on (local-filesystems and net-device-up)
stop on runlevel [016]

chdir /usr/share/html5-validator
exec python build/build.py --control-port=8889 run
respawn
</code></pre><p>Save and start it:</p><pre><code>start html5-validator
</code></pre><p>Afterwards you can access your validator via <code>http://server/w3c-validator</code>. It supports the HTML5 validator from there, but you can also access it directly at <code>http://server:8888</code>.</p><h3>Security note</h3><p>The validator.nu service is running as root and there are no limits on both validators. Make sure you only run it on a trusted network, or properly secure it.</p><hr/>Tags: <a class="link" href="../tags/html.html">html,</a><a class="link" href="../tags/html5.html">html5,</a><a class="link" href="../tags/tests.html">tests,</a><a class="link" href="../tags/validation.html">validation,</a><a class="link" href="../tags/validator.html">validator,</a><a class="link" href="../tags/w3.html">w3,</a><a class="link" href="../tags/w3c.html">w3c,</a><div class="footer"><hr/><p>Generated by <a href="/s/software/ingsoc.html">ingsoc</a> | <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | <a href="/s/static/About.html">About</a><br/></p></div></div></div></div></div></div><script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://hosted-oswa.org/piwik/" : "http://hosted-oswa.org/piwik/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript>&lt;p&gt;&lt;img src="http://hosted-oswa.org/piwik/piwik.php?idsite=1" style="border:0" alt="" /&gt;&lt;/p&gt;</noscript></body></html>