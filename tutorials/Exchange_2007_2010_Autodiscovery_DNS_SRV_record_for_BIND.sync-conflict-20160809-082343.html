<!DOCTYPE html><html lang="en"><head><title>Exchange 2007 and 2010 Autodiscovery DNS SRV record for BIND - Raymii.org</title><link href="/s/inc/css/custom-first.css" rel="stylesheet"/><link href="/s/inc/css/light.css" rel="stylesheet"/><link href="/s/inc/css/custom.css" rel="stylesheet" title="custom"/><script src="/s//inc/js/toc.js" type="text/javascript"></script><meta content="text/html;charset=utf-8" http-equiv="Content-Type"/><link href="inc/img/icons/iphone.png" rel="apple-touch-icon"/><link href="inc/img/icons/ipad.png" rel="apple-touch-icon" sizes="76x76"/><link href="inc/img/icons/iphone-retina.png" rel="apple-touch-icon" sizes="120x120"/><link href="inc/img/icons/ipad-retina.png" rel="apple-touch-icon" sizes="152x152"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="/s/inc/opensearch.xml" rel="search" type="application/opensearchdescription+xml"/><link href="https://raymii.org/s/feed.xml" rel="alternate" title="RSS Feed for Raymii.org" type="application/rss+xml"/></head><body><a id="top-of-page"></a><div class="container-fluid "><div class="row"><div class="col-md-12"><div class="col-md-3 col-sm-3 max-200"><div class="well well-none"><h3 class="headheader"><a href="https://raymii.org/s/">Raymii.org<img alt="IEC Resistor logo" src="/s/inc/img/resistor-50.png"/></a></h3><h6 class="headheader">Quis custodiet ipsos custodes?</h6><h6><a href="https://raymii.org/s/feed.xml">RSS Feed</a></h6></div><form action="https://encrypted.google.com/search" role="search"><div class="form-group"><input name="as_sitesearch" type="hidden" value="raymii.org"/><input name="as_qdr" type="hidden" value="all"/><input class="form-control" name="as_q" placeholder="Search" type="text"/></div></form><div class="menu"><ul class="nav nav-pills nav-stacked"><li><a class="special-menu" href="/s/index.html">Home</a></li><li class="bottom-spacing"><a class="special-menu" href="/s/everything.html">All Pages</a></li><li class="hideifsmall"><a class="link" href="/s/tags/bash.html">Bash</a></li><li class="hideifsmall"><a class="link" href="/s/tags/monitoring.html">Monitoring</a></li><li class="hideifsmall"><a class="link" href="/s/tags/ssl.html">SSL</a></li><li class="hideifsmall"><a class="link" href="/s/tags/debian.html">Debian</a></li><li class="hideifsmall"><a class="link" href="/s/tags/python.html">Python</a></li><li class="hideifsmall"><a class="link" href="/s/tags/vpn.html">VPN</a></li><li class="hideifsmall"><a class="link" href="/s/tags/ubuntu.html">Ubuntu</a></li><li class="hideifsmall"><a class="link" href="/s/tags/nginx.html">nginx</a></li><li class="hideifsmall"><a class="link" href="/s/tags/openstack.html">Openstack</a></li><li class="hideifsmall"><a class="link" href="/s/tags/ansible.html">Ansible</a></li></ul><a href="http://clients.inceptionhosting.com/aff.php?aff=083">Inception Hosting Affiliate Link</a><br/> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">Digital Ocean Affiliate Link, $10 free credit.</a><br/><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" data-ad-client="ca-pub-7993642564731324" data-ad-slot="9322003332" style="display:inline-block;width:200px;height:200px"></ins><script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script></div></div><div class="col-md-8 col-sm-8"><div class="inner"><h2 class="headheader">Exchange 2007 and 2010 Autodiscovery DNS SRV record for BIND</h2><ul class="breadcrumb"><li><a class="link" href="../index.html">Home</a></li><li><a class="link" href="../tutorials/index.html">Tutorials</a></li><li><a class="link" href="Exchange_2007_2010_Autodiscovery_DNS_SRV_record_for_BIND.html">Exchange 2007 and 2010 Autodiscovery DNS SRV record for BIND</a></li></ul><p><small>09-05-2013</small> | <small>Remy van Elst</small></p><div class="ad"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" data-ad-client="ca-pub-7993642564731324" data-ad-slot="6172324376" style="display:inline-block;width:728px;height:90px"></ins><script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script></div><br/><div id="toc"><h3>Table of Contents</h3></div><hr/><div id="contents"><p>Note: This article is targeted at *NIX administrators who have to manage Exchange installations, but are not Microsoft specialists. Therefore the BIND setup does not have an explanation, but the Exchange part has.</p><h3>What is Exchange Autodiscovery</h3><p>Exchange 2007/2010 Autodiscovery is the ability for Outlook to automatically configure itself to an Exchange 2007/2010 server. The main benefit is for remote users to use Outlook on the Internet as if it was connected on the LAN, this is called Outlook Anywhere or Outlook RPC over HTTP. This is very easily accomplished by having a specific DNS record available for the domain.</p><h4>How does Exchange Autodiscovery work?</h4><p>Outlook has a few ways to look for domain information when configuring itself based on the users email address. Lets say I want to set up Outlook as <code>john.doe@example.org</code>, but my site does not have the required Autodiscovery XML files set up. I enter that email address in Outlook, now Outlook do the following things to get its information:</p><ul><li>Autodiscover posts to https://example.org/Autodiscover/Autodiscover.xml. This fails.</li><li>Autodiscover posts to https://autodiscover.example.org/Autodiscover/Autodiscover.xml. This fails.</li><li>Autodiscover performs the following redirect check: GET http://autodiscover.example.org/Autodiscover/Autodiscover.xml. This fails.</li><li>Autodiscover uses DNS SRV lookup for <em>autodiscover.</em>tcp.example.org, and then "mail.example.org" is returned.</li><li>Outlook asks permission from the user to continue with Autodiscover to post to https://mail.example.org/autodiscover/autodiscover.xml.</li><li>Autodiscover's POST request is successfully posted to https://mail.example.org/autodiscover/autodiscover.xml.</li></ul><p>There are various reasons not to set up the Autodiscovery XML on the main website or the Autodiscover.example.org. Mainly because it requires extra certificates, IP addresses and maintenance. Maybe a company does not have Windows servers to host their main website, or they don't want the hassle. In those cases the DNS SRV record works very nice.</p><h3>BIND DNS Record</h3><p>The following record line should be put in your zone config file (<code>/etc/bind/example.org</code>):</p><pre><code>; Exchange autodiscovery
_autodiscover._tcp                      IN      SRV 0 0 443 mail.example.org.
</code></pre><p>After a <code>rndc reload</code> you should be able to use the Autodiscovery service without problems. It is tested with BIND 9.8.</p><h3>Sources</h3><p><a href="http://technet.microsoft.com/en-us/library/bb332063.aspx">White Paper: Exchange 2007 Autodiscover Service</a><br/> <a href="http://support.microsoft.com/kb/940881/en-us">A new feature is available that enables Outlook 2007 to use DNS Service Location (SRV) records to locate the Exchange Autodiscover service</a></p></div><hr/>Tags: <a class="link" href="../tags/bind.html">bind,</a><a class="link" href="../tags/dns.html">dns,</a><a class="link" href="../tags/exchange.html">exchange,</a><a class="link" href="../tags/microsoft.html">microsoft,</a><a class="link" href="../tags/nameserver.html">nameserver,</a><a class="link" href="../tags/outlook.html">outlook,</a><a class="link" href="../tags/outlook-anywhere.html">outlook-anywhere,</a><a class="link" href="../tags/outlook-rpc.html">outlook-rpc,</a><a class="link" href="../tags/owa.html">owa,</a><a class="link" href="../tags/server-2008.html">server-2008,</a><a class="link" href="../tags/srv.html">srv,</a><a class="link" href="../tags/windows.html">windows,</a><div class="footer"><hr/><p>Generated by <a href="/s/software/ingsoc.html">ingsoc</a> | <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | <a href="/s/static/About.html">About</a><br/></p></div></div></div></div></div></div><script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://hosted-oswa.org/piwik/" : "http://hosted-oswa.org/piwik/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript>&lt;p&gt;&lt;img src="http://hosted-oswa.org/piwik/piwik.php?idsite=1" style="border:0" alt="" /&gt;&lt;/p&gt;</noscript></body></html>