<!DOCTYPE html><html lang="en"><head><title>Dogtag / Red Hat Certificate System reset admin pkiconsole password - Raymii.org</title><link href="/s/inc/css/light.css" rel="stylesheet" title="light"/><link href="/s/inc/css/dark.css" rel="alternate stylesheet" title="dark"/><script async="" src="/s/inc/js/jquery-2.1.1.min.js"></script><script async="" src="/s/inc/js/bootstrap.3.2.0.min.js"></script><script async="" src="/s/inc/js/styleswitcher.js"></script><meta content="text/html;charset=utf-8" http-equiv="Content-Type"/><link href="inc/img/icons/iphone.png" rel="apple-touch-icon"/><link href="inc/img/icons/ipad.png" rel="apple-touch-icon" sizes="76x76"/><link href="inc/img/icons/iphone-retina.png" rel="apple-touch-icon" sizes="120x120"/><link href="inc/img/icons/ipad-retina.png" rel="apple-touch-icon" sizes="152x152"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="/s/inc/opensearch.xml" rel="search" type="application/opensearchdescription+xml"/><link href="https://raymii.org/s/feed.xml" rel="alternate" title="RSS Feed for Raymii.org" type="application/rss+xml"/></head><body><a id="top-of-page"></a><div class="container-fluid "><div class="row"><div class="col-md-12"><div class="col-md-3 col-sm-3 max-200"><div class="well well-none"><h3 class="headheader"><a href="https://raymii.org/s/">Raymii.org<img alt="IEC Resistor logo" src="/s/inc/img/resistor-50.png"/></a></h3><h6 class="headheader">Quis custodiet ipsos custodes?</h6><h6><a href="https://raymii.org/s/feed.xml">RSS Feed</a></h6></div><form action="https://encrypted.google.com/search" role="search"><div class="form-group"><input name="as_sitesearch" type="hidden" value="raymii.org"/><input name="as_qdr" type="hidden" value="all"/><input class="form-control" name="as_q" placeholder="Search" type="text"/></div></form><div class="menu"><ul class="nav nav-pills nav-stacked"><li><a class="special-menu" href="/s/index.html">Home</a></li><li class="bottom-spacing"><a class="special-menu" href="/s/everything.html">All Items</a></li><li><a class="link" href="/s/tags/bash.html">Bash</a></li><li><a class="link" href="/s/tags/monitoring.html">Monitoring</a></li><li><a class="link" href="/s/tags/ssl.html">SSL</a></li><li><a class="link" href="/s/tags/debian.html">Debian</a></li><li><a class="link" href="/s/tags/python.html">Python</a></li><li><a class="link" href="/s/tags/vpn.html">VPN</a></li><li><a class="link" href="/s/tags/ubuntu.html">Ubuntu</a></li><li><a class="link" href="/s/tags/nginx.html">nginx</a></li><li><a class="link" href="/s/tags/openstack.html">Openstack</a></li><li><a class="link" href="/s/tags/ansible.html">Ansible</a></li></ul><ul class="navbar-collapse nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Style<b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#" onclick="setActiveStyleSheet('dark')">Dark</a></li><li><a href="#" onclick="setActiveStyleSheet('light')">Light</a></li></ul></li></ul><br/><br/><a href="http://clients.inceptionhosting.com/aff.php?aff=083">Inception Hosting Affiliate Link</a><br/> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">Digital Ocean Affiliate Link, $10 free credit.</a><br/><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" data-ad-client="ca-pub-7993642564731324" data-ad-slot="9322003332" style="display:inline-block;width:200px;height:200px"></ins><script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script></div></div><div class="col-md-8 col-sm-8"><div class="inner"><h2 class="headheader">Dogtag / Red Hat Certificate System reset admin pkiconsole password</h2><ul class="breadcrumb"><li><a class="link" href="../index.html">Home</a></li><li><a class="link" href="../tutorials/index.html">Tutorials</a></li><li><a class="link" href="Dogtag_Red_Hat_Certificate_System_Reset_Admin_pkiconsole_Password.html">Dogtag / Red Hat Certificate System reset admin pkiconsole password</a></li></ul><p><small>19-06-2013</small> | <small>Remy van Elst</small></p><div class="ad"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" data-ad-client="ca-pub-7993642564731324" data-ad-slot="6172324376" style="display:inline-block;width:728px;height:90px"></ins><script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script></div><br/><p>This tutorial shows you how to reset the password of the pkiconsole admin user within the Red Hat Certificate System or Dogtag.</p><p>What is <a href="https://www.redhat.com/certificate_system/">Red Hat Certificate System:</a></p><pre><code>Red Hat Certificate System provides a powerful security framework to manage user identities and ensure privacy of communications. Handling all the major functions of the identity life cycle, Red Hat Certificate System simplifies enterprise-wide deployment and adoption of a Public Key Infrastructure (PKI).
</code></pre><p><a href="http://pki.fedoraproject.org/">Dogtag</a> is the open source fork maintained by the Fedora project.</p><p><img alt="The PKICONSOLE interface" src="https://raymii.org/s/inc/img/pkiconsole.png"/></p><p>PKI Console is used as an administrative backend into the RHCS/Dogtag system. It allows configuration of all kind of CA aspects, CRL's, Certificates, OCSP's and much more. You login to the pkiconsole with an administrative user, most of the time named admin. Dogtag/RHCS uses an LDAP database in the backend to store all the information. In the case of dogtag 1.3 this is <code>fedora-ds</code>, all the latter versions and RHCS use <code>389-ds</code>. The pkiconsole authenticates against this LDAP database, so if you have the <code>Directory Manager</code> password you can reset the <code>admin</code> password.</p><p>First locate the <code>/etc/pki-&lt;instance-name&gt;/password.conf</code> file. It looks like this:</p><pre><code>hardware-pki-&lt;instance-name&gt;=0000
internal=0000123400001234
internaldb=00001234
replicationdb=83729562
</code></pre><p>The <code>internaldb</code> value is the LDAP password for the <code>Directory Manager</code>. The hardware part is used when you use a HSM.</p><p>Now we have the password for the <code>Directory Manager</code> we can login to the LDAP and reset the admin password.</p><p>Use the following command to login to the LDAP of your CA instance, changing the values for your setup:</p><pre><code>ldapmodify -H ldap://localhost:99389 -D "cn=Directory Manager" -Wx -e preread=userPassword
</code></pre><p>You will be asked for the Directory Manager password, after entering that you don't see anything. You are now on an LDAP prompt, where you can enter <code>LDIF</code> commands. The commands for changing the admin password are these:</p><pre><code>dn: uid=admin,ou=People,dc=pki-&lt;instance-name&gt;
changetype:modify
replace:userpassword
userpassword: 1234
</code></pre><p>Press <code>return</code> twice after the last line. When successful it will show the following:</p><pre><code>modifying entry "uid=admin,ou=People,dc=pki-&lt;instance-name&gt;"
</code></pre><p>Press <code>CTRL+C</code> twice afterwards, and you are done. You can now login to the PKIConsole with your new password.</p><hr/>Tags: <a class="link" href="../tags/389-ds.html">389-ds,</a><a class="link" href="../tags/certificate-system.html">certificate-system,</a><a class="link" href="../tags/dogtag.html">dogtag,</a><a class="link" href="../tags/fedora-ds.html">fedora-ds,</a><a class="link" href="../tags/ldap.html">ldap,</a><a class="link" href="../tags/pki.html">pki,</a><a class="link" href="../tags/pkiconsole.html">pkiconsole,</a><a class="link" href="../tags/red-hat.html">red-hat,</a><a class="link" href="../tags/ssl.html">ssl,</a><div class="footer"><hr/><p>Generated by <a href="/s/software/ingsoc.html">ingsoc</a> | <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | <a href="/s/static/About.html">About</a><br/></p></div></div></div></div></div></div><script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://hosted-oswa.org/piwik/" : "http://hosted-oswa.org/piwik/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript>&lt;p&gt;&lt;img src="http://hosted-oswa.org/piwik/piwik.php?idsite=1" style="border:0" alt="" /&gt;&lt;/p&gt;</noscript></body></html>